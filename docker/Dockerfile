# Specifies the base image from TensorFlow with GPU support and Jupyter
FROM tensorflow/tensorflow:2.15.0-gpu

# Set noninteractive timezone configuration
ENV DEBIAN_FRONTEND=noninteractive 
ENV TZ=America/New_York
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && \
    echo $TZ > /etc/timezone

# Install necessary packages
RUN apt-get update -y && \
    apt-get install -y \
    git \
    build-essential \
    libssl-dev && \
    # Upgrade pip to the latest version
    pip install --no-cache-dir --upgrade pip && \
    # Install Python packages using pip
    pip install --no-cache-dir pandas numpy matplotlib scikit-learn && \
    # Clean up to reduce image size
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Clone the Exploit Database repository
RUN git clone https://gitlab.com/exploit-database/exploitdb.git /opt/exploitdb

# Install searchsploit
RUN sed 's|path_array+=(.*)|path_array+=("/opt/exploitdb")|g' /opt/exploitdb/.searchsploit_rc > ~/.searchsploit_rc && \
    ln -sf /opt/exploitdb/searchsploit /usr/local/bin/searchsploit

# Set environment variables (if necessary)
ENV PATH="/opt/exploitdb:${PATH}"

# Create a new directory for your project and set it as the working directory
RUN mkdir -p /home/testing/model
WORKDIR /home/testing/model
